#O Monstro Físico Embaixo da Cama de Abstrações

Em tempos de Aprendizagem de Máquina, Tudo como Serviço, Computação em Nuvem e Realidade Aumentada, entre outras maravilhas, é fácil perdermos de vista o fato de que essas tecnologias sofisticadas **são apenas o cume de uma enorme montanha de abstrações** construídas ao longo de séculos de ciência e engenharia. Como disse Arthur C. Clarke, naquela que ficou conhecida como a Terceira Lei de Clarke e que já virou clichê nerd (perdão  por repeti-lo aqui), "qualquer tecnologia suficientemente avançada é indistinguível de mágica".

O ponto chave aqui é que não estamos falando do processo de substituição de velhas abstrações por novas (também essencial e que ocorre em paralelo), mas do _empilhamento_ de camadas de abstração de nível mais alto sobre aquelas de nível mais baixo para construção (ou explicação) de sistemas (e sistemas de sistemas) cada vez mais complexos. Assim os fenômenos eletromagnéticos naturais são abstraídos nas equações de Maxwell, que são abstraídas em redes de elementos ideais (circuitos elétricos), que são abstraídas em portas lógicas e registradores, que são abstraídos em processadores e memórias, que por sua vez são abstraídos em linguagens de programação e sistemas operacionais e assim por diante até, finalmente, chegarmos em Google Cloud ML, Internet das Coisas e Pokemón Go. Abracadabra!

A capacidade de abstração é a ferramenta matadora de que nos dotou o processo evolucionário para compreender e manipular o mundo. O cérebro humano possui uma capacidade finita, apesar de muito grande, de processamento de informações. O imenso poder da abstração consiste em nos permitir focar essa capacidade de processamento limitada nos poucos elementos que são essenciais a um determinado problema ou contexto e descartar os miríades de detalhes irrelevantes que, de outra forma, nos esmagariam cognitivamente. Para criar ou analisar um algoritmo de exponenciação de inteiros eu não preciso saber como se comportam os transistores dentro do processador que vai executá-lo.

Acontece que o mundo real não vai embora ao ser abstraído. Ele continua lá, embaixo da cama, à espreita. Abstrações só são válidas dentro de condições - assumindo premissas - bem definidas. Meu algoritmo de exponenciação de inteiros vai funcionar desde que as **operações primitivas** das quais ele se utiliza, como a adição binária, sejam executadas corretamente pelos circuitos eletrônicos do processador. E os circuitos do processador funcionarão corretamente se não forem submetidos, por exemplo, a interferência eletromagnética excessiva. Ou  se não houverem desvios significativos (em relação ao projetado) na geometria e na composição química dos artefatos que constituem os elementos de circuito na pastilha semicondutora. Esses desvios, quando ocorrem, são geralmente ocasionados por variações no processo produtivo, que os fornecedores de chips semicondutores tentam, primeiramente, minimizar e, em última instância, detectar através de testes antes de colocar os dispositivos no mercado. As premissas são como as cartas do castelo de abstrações: Basta que uma delas seja puxada para que toda a estrutura acima venha abaixo.

Recentemente, um fascinante exemplo de monstro físico embaixo da cama de abstrações voltando para nos assombrar, e puxando nosso pé virtual no meio da noite, nos foi dado por uma equipe de pesquisadores da Universidade de Michigan Ann Arbor. Eles conceberam - e implementaram - um ataque cibernético de elevação de privilégios de "engenhosidade demoníaca", que explora a natureza física fundamentalmente **analógica** dos microprocessadores. O status demoníaco da obra foi concedido à mesma por Yonatan Zunger, Líder de Infraestrutura para o Google Assistant.

O novo ataque foi denominado de _A2_, supostamente tanto uma homenagem à universidade Ann Arbor quanto uma alusão à natureza analógica do mesmo (_Analog Attack_). O A2 é o mais recente de uma linhagem de ataques conhecidos como _Cavalos de Tróia de hardware_ (_Hardware Trojans_ - HT), cuja principal característica, obviamente, é que eles se baseiam em modificações maliciosas do **hardware** - e não do software, como é o caso dos _trojans_ comuns. E o princípio de operação dos HTs é exatamente esse: Não importa quão bem projetado é o seu software; em tempo de execução, e em um nível mais fundamental, ele não passa de cargas elétricas se deslocando e se acumulando em caminhos e lugares específicos de uma pastilha semicondutora. E se esse processo físico não ocorre de acordo com as especificações assumidas pelas camadas de abstração superiores (as tais premissas) você está metaforicamente morto (ou literalmente, dependendo da aplicação).

Sabe o tal _modo kernel_ ou _modo supervisor_, em que, enquanto ele estiver ativado, qualquer software que estiver executando na CPU  tem poder absoluto? Em linhas gerais, ele não é mais do que um bit especial setado em um registrador específico. Ou seja, uma certa quantidade de carga elétrica acumulada em uma posição específica da pastilha semicondutora. Carga essa que poderia ser resultado até mesmo do impacto aleatório de partículas subatômicas oriundas do Espaço! Como nos filmes da Marvel e da DC, os raios cósmicos podem dar superpoderes a qualquer zé-ninguém! Apesar do chiste, acredite, essa é uma preocupação real na indústria aeroespacial.

No caso dos _trojans_ de hardware, não se trata de raios cósmicos, mas de alterações maliciosas nas características dos elementos de circuito originais do chip ou da introdução de elementos estranhos ao design original, com o objetivo de alterar o funcionamento do circuito. Essas modificações são contrabandeadas por um agressor para dentro do chip nas fases finais do ciclo de desenvolvimento do produto, antes da sua fabricação. Uma vez 